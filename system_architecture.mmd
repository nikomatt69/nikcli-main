%% Mermaid system architecture diagram
graph TD
    ClientApp[Client App]
    A[AI SDK Core]
    B[AI Gateway]
    C[Providers and Models]
    D[Tools]
    E[Prompt Engineering and Settings]
    F[Message Persistence]
    G[OpenAI and Other Providers]
    H[Model Variants and Endpoints]
    I[Embeddings]
    J[Image Generation]
    K[Transcription]
    L[Speech]
    M[Tool Calling]
    N[Middleware and Error Handling]
    O[Telemetry and Observability]
    P[Telemetry Storage]
    Q[Chat History]

    ClientApp -->|Requests - generate/chat/embeddings| A
    ClientApp -->|REST requests| B
    A --> C
    B --> C
    A --> D
    D --> A
    A --> E
    A --> F
    F --> A
    C --> G
    C --> H
    D --> I
    D --> J
    D --> K
    D --> L
    D --> M
    A --> N
    B --> N
    A --> O
    B --> O
    O --> P
    F --> Q
    Q --> A

    style ClientApp fill:#ffccff,stroke:#333,stroke-width:2px
    style B fill:#e0f7fa,stroke:#333,stroke-width:2px
    style C fill:#e8f5e9,stroke:#333,stroke-width:2px
