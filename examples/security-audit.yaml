name: "security-audit"
agent: "universal-agent"
goals:
  - "Esegui un audit di sicurezza completo"
  - "Risolvi vulnerabilità trovate"
  - "Genera report di sicurezza"
limits:
  max_tool_calls: 60
  max_time_minutes: 35
  max_memory_mb: 2048
policy:
  approve_commands: true
  network_allow:
    - "registry.npmjs.org"
    - "yarnpkg.com"
  safe_mode: true
steps:
  - run: "yarn audit"
    retry_on_failure: false
    timeout_minutes: 5
  - run: "yarn audit --fix"
    retry_on_failure: false
    timeout_minutes: 10
  - run: "nikcli /auto 'analizza e documenta eventuali problemi di sicurezza rimanenti'"
    timeout_minutes: 15
  - run: "yarn test"
    retry_on_failure: true
    timeout_minutes: 5
commit:
  message: "security: risolvi vulnerabilità (nikCLI background agent)"
  open_pr: true
  reviewers: ["@security-team"]
  labels: ["security", "automated", "vulnerability"]
  draft: false
